
- name: Check Dashboards
  shell: gcloud monitoring dashboards list --filter="displayName=Ghost_Monitoring"
  register: output_dashboard

- name: Update Dashboard File
  template:
    src: dashboard.yml
    dest: dashboard.json
  when: output_dashboard.stdout == ""

- name: Create 'Ghost_Monitoring' Dashboard
  shell: gcloud monitoring dashboards create --config-from-file=dashboard.json
  when: output_dashboard.stdout == ""